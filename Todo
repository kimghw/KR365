[x] dcr ì„œë²„ì—ì„œ bearer ì¬ë°œê¸‰ ì‹œ Azureì˜ refresh í† í° ì¬ë°œí–‰ ìš”ì²­ ì œê±°
    - unified_http_server.pyì˜ refresh_token grant ìˆ˜ì • ì™„ë£Œ
    - DCR Bearer í† í° ì¬ë°œê¸‰ ì‹œ Azure í† í° ì •ë³´ ì™„ì „íˆ ë…ë¦½
    - expires_inì„ Azureì—ì„œ ê°€ì ¸ì˜¤ì§€ ì•Šê³  DCR ìì²´ ì„¤ì •(3600ì´ˆ) ì‚¬ìš©
    - scopeë§Œ dcr_azure_tokensì—ì„œ ì¡°íšŒ (Azure API í˜¸ì¶œ ì—†ìŒ)

    ë†’ìŒ â€“ entrypoints/production/unified_http_server.py:793-801 & modules/dcr_oauth/dcr_service.py:561-571: Bearer ê°±ì‹  ì‹œ expires_inì„ Azure access í† í°ì˜ ë‚¨ì€ ìˆ˜ëª…ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤. Azure í† í°ì´ ì´ë¯¸ ë§Œë£Œëœ ìƒíƒœì—ì„œ ê°±ì‹ í•˜ë©´ expires_in <= 0ì´ ë˜ì–´ ìƒˆ Bearer í† í°ì´ ì¦‰ì‹œ ë§Œë£Œë©ë‹ˆë‹¤. DCR ì „ìš© TTL(ì˜ˆ: 3600ì´ˆ)ì„ ì‚¬ìš©í•˜ë„ë¡ ë¶„ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.
ë†’ìŒ â€“ entrypoints/production/unified_http_server.py:759-790: ë¦¬í”„ë ˆì‹œ í”Œë¡œìš°ê°€ ê¸°ì¡´ DCR refresh í† í°ì„ ì¬ì‚¬ìš©í•˜ë©´ì„œ expires_atì€ ê°±ì‹ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì›ë˜ 30ì¼ì´ ì§€ë‚˜ë©´ í† í°ì´ ë§Œë£Œë¡œ ì²˜ë¦¬ë˜ì–´ ë” ì´ìƒ ê°±ì‹ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì„±ê³µ ì‹œ ë§Œë£Œ ì‹œê°„ì„ ì—°ì¥í•˜ê±°ë‚˜ ìƒˆ refresh í† í°ì„ ë°œê¸‰í•´ì•¼ í•©ë‹ˆë‹¤.
ì¤‘ê°„ â€“ entrypoints/production/unified_http_server.py:808-816: ê°±ì‹  ê³¼ì •ì—ì„œ Azure API í˜¸ì¶œì´ ì „í˜€ ì—†ì–´ Azure refresh í† í°ì´ ê°±ì‹ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. Microsoft refresh í† í°ì€ ìŠ¬ë¼ì´ë”© ìœˆë„ìš° ì •ì±…ì„ ì‚¬ìš©í•˜ë¯€ë¡œ ì¥ê¸°ì ìœ¼ë¡œ ë¬´íš¨í™”ë  ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤. ê°±ì‹  ì‹œì ì— Azure í† í° ê°±ì‹ ì„ ìˆ˜í–‰í•˜ê±°ë‚˜ ë°±ê·¸ë¼ìš´ë“œ ì‘ì—…ìœ¼ë¡œ íšŒì „ì‹œí‚¤ëŠ” ë°©ì•ˆì„ ê²€í† í•´ì•¼ í•©ë‹ˆë‹¤.

[ ] bearer_tokenì˜ ë§Œê¸° ì‹œê°„ì„ ì¶”ì í•´ì„œ ê´€ë¦¬ í•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •
[ ] teams
   - ì‹œë‚˜ë¦¬ì˜¤ 1 : ì‚¬ìš©ì ì´ë¦„(ì˜ë¬¸)ìœ¼ë¡œ ë©”ì‹œì§€ ì „ì†¡ ë° ì¡°íšŒ(ìµœê·¼ 30ê°œ ì •ë„ ëŒ€í™” ë‚´ìš©)
   - ì‹œë‚˜ë¦¬ì˜¤ 2 : ìµœê·¼ ëŒ€í™” ì‚¬ìš©ì ì¡°íšŒ(ëŒ€ìƒì ì´ë¦„, ìš°ì„  ìˆœìœ„ 5ê°œ) - DB ì—ì„œ ëª©ë¡ ê´€ë¦¬
   - ì‹œë‚˜ë¦¬ì˜¤ 3 : ëŒ€í™”ë°©ì— ëŒ€í•œ 'í‚¤ì›Œë“œ ê²€ìƒ‰', ì „ì²´ ëŒ€í™”ë°©ì— ëŒ€í•œ 'í‚¤ì›Œë“œ ê²€ìƒ‰ ' 50ê°œì”© ìˆœì°¨ì ìœ¼ë¡œ ê·¸ë¦¬ê³  500ê°œê¹Œì§€
   - ì‹œë‚˜ë¦¬ì˜¤ 4 : ì‚¬ìš©ì ì´ë¦„ì´ë‚˜ cht_idê°€ ì—†ëŠ” ê²½ìš° ìµœê·¼ ëŒ€í™”í•œ ì‚¬ëŒì˜ chat_id ì—ì„œ ì¡°íšŒ/ë³´ë‚´ê¸°
   * ì œì•½ ì¡°ê±´
        - í…Œì´ë¸”ì„ ì´ìš©í•˜ì—¬ ìµœê·¼ ëŒ€í™”í•œ ìƒëŒ€ì˜ ìµœê·¼ ëŒ€í™” ì‹œê°„ ê¸°ë¡
        - chat_id ì™€ ì‚¬ìš©ì ì´ë¦„ ë§¤í•‘ í…Œì´ë¸” ê´€ë¦¬
        - ì±„íŒ…ë°© ëª©ë¡ ì¡°íšŒ ì‹œ í…Œì´ë¸” ë™ê¸°í™”
        - í…Œì´ë¸”ì—ì„œëŠ” ëŒ€í™”ë‚´ìš© ê´€ë¦¬ ì•ˆí•¨
        - ëŒ€í™”ë°© ì‚­ì œëœ ê²½ìš° ì´ë ¥ ê´€ë¦¬(ì‚­ì œëœ ëŒ€í™”ë°© í‘œì‹œ)
        - ê¸°ì¡´ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ê³  ë„êµ¬ì˜ ìŠ¤í‚¤ë§ˆë¥¼ ë³€ê²½í•˜ì—¬ ë„êµ¬ë¥¼ í•„ìš” ì´ìƒìœ¼ë¡œ ëŠ˜ë¦¬ì§€ ì•Šë„ë¡

## ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨ ê°œì„ ì‚¬í•­ (2024-11-07)

### âœ… ì™„ë£Œëœ ì‘ì—…
[x] LogsDBServiceì— check_same_thread=False ì¶”ê°€
    - ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ ì•ˆì „ì„± í™•ë³´
    - WAL ëª¨ë“œ í™œì„±í™”ë¡œ ì„±ëŠ¥ ê°œì„ 

[x] DCR OAuthë¥¼ DatabaseManagerë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜
    - ìƒˆë¡œìš´ DCRDatabaseService í´ë˜ìŠ¤ ìƒì„±
    - ì—°ê²° í’€ë§ìœ¼ë¡œ ì„±ëŠ¥ ê°œì„ 
    - í•˜ìœ„ í˜¸í™˜ì„± ìœ ì§€ (db_utils.py â†’ db_service.py ë¦¬ë‹¤ì´ë ‰íŠ¸)

### ğŸ“‹ ì¤‘ê¸° ê°œì„ ì‚¬í•­

[ ] ê³µí†µ Context Manager ë„ì…
    - LogsDBServiceì˜ ë°˜ë³µì ì¸ try/finally ì œê±°
    - ì½”ë“œ ì¤‘ë³µ ê°ì†Œë¥¼ ìœ„í•œ ê³µí†µ íŒ¨í„´ êµ¬í˜„
    - ìœ„ì¹˜: infra/core/db_utils.py ìƒì„± ê³ ë ¤

[ ] íƒ€ì„ìŠ¤íƒ¬í”„ ìƒì„± ìœ í‹¸ë¦¬í‹° í†µì¼
    - get_utc_timestamp() ê³µí†µ í•¨ìˆ˜ ìƒì„±
    - ì—¬ëŸ¬ ëª¨ë“ˆì—ì„œ ì¤‘ë³µë˜ëŠ” datetime ì½”ë“œ ì œê±°
    - ì˜í–¥ ë°›ëŠ” íŒŒì¼:
      - modules/teams_mcp/teams_db_manager.py
      - infra/core/logs_db.py

[ ] ì—ëŸ¬ ì²˜ë¦¬ ì „ëµ í†µì¼
    - ë¬¸ì„œí™”ëœ ì—ëŸ¬ í•¸ë“¤ë§ ê°€ì´ë“œë¼ì¸ ì‘ì„±
    - ì˜ˆì™¸ vs ë°˜í™˜ê°’ ì „ëµ ëª…í™•í™”
    - í˜„ì¬ ìƒí™©:
      - logs_db.py: Bool ë°˜í™˜
      - db_service.py: ì˜ˆì™¸ ì¬ë°œìƒ
      - teams_db_manager.py: None ë°˜í™˜

### ğŸ“‹ ì¥ê¸° ê°œì„ ì‚¬í•­

[ ] íƒ€ì… íŒíŠ¸ ê°œì„ 
    - ì „ì²´ í”„ë¡œì íŠ¸ íƒ€ì… íŒíŠ¸ ë³´ì™„
    - mypy ë˜ëŠ” pyright ë„ì… ê³ ë ¤
    - ìš°ì„  ëŒ€ìƒ:
      - modules/dcr_oauth/ ëª¨ë“ˆ
      - infra/core/ í•µì‹¬ ëª¨ë“ˆ

[ ] ë¡œê¹… ë©”ì‹œì§€ í‘œì¤€í™”
    - ë¡œê·¸ í¬ë§· ê°€ì´ë“œë¼ì¸ ì‘ì„±
    - ì¼ê´€ëœ ë¡œê·¸ ë ˆë²¨ ì‚¬ìš©
    - ì´ëª¨ì§€ ì‚¬ìš© ê·œì¹™ ì •ë¦½

[ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¶”ê°€
    - ê° DB ì„œë¹„ìŠ¤ì˜ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
    - í†µí•© í…ŒìŠ¤íŠ¸ ì¶”ê°€
    - CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶• ê³ ë ¤

### ê¸°íƒ€ ë°œê²¬ëœ ì´ìŠˆ

[ ] í™˜ê²½ë³€ìˆ˜ ê´€ë ¨
    - ENCRYPTION_KEY ì„¤ì • í•„ìš” (.env íŒŒì¼)
    - .env.example íŒŒì¼ ì—…ë°ì´íŠ¸

[ ] ì„±ëŠ¥ ìµœì í™” ê¸°íšŒ
    - ì¸ë±ìŠ¤ ì¶”ê°€ ê²€í† 
    - ì¿¼ë¦¬ ìµœì í™”
    - ìºì‹± ì „ëµ ìˆ˜ë¦½